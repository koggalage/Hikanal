<html>
  <head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  </head>
<body>
  <div class="container">
    <div class="row">
      <div class="col-md-6">
  <div id="map-canvas"></div>
        
      </div>
      <div class="col-md-6">
        
  <div id="map-canvas2"></div>
      </div>
    </div>
  </div>
</body>

<style>
#map-canvas2 {
    height: 100%;
    width: 80%;
    margin: 0px;
    padding: 50px
}
#map-canvas {
    height: 100%;
    width: 100%;
    margin: 0px;
    padding: 0px
}
</style>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDxJt45HSxnhUn26cibrRrQin578_9T-Yg"></script>

<script>
  
function initialize() {     
var myLatlng;    
var mapOptions;
myLatlng = new google.maps.LatLng(7.884472, 80.850632);
    mapOptions = {
      zoom: 8,
      center: myLatlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(
      document.getElementById("map-canvas"), mapOptions);
    google.maps.event.addListenerOnce(map, 'idle', function() {
      drawRectangle(map);
    });
    function drawRectangle(map) {
      var bounds = map.getBounds();
      var southWest = bounds.getSouthWest();
      var northEast = bounds.getNorthEast();
      var numberOfParts = 6;
      var tileWidth = (northEast.lng() - southWest.lng()) / numberOfParts;
      var tileHeight = (northEast.lat() - southWest.lat()) / numberOfParts;
      // console.log("northEast.lng()", northEast.lng());
      // console.log("southWest.lng()", southWest.lng());
      // console.log("tileWidth", tileWidth);
      // console.log("tileHeight", tileHeight);
      //console.log("northEast", northEast);
      for (var x = 0; x < numberOfParts; x++) {
        for (var y = 0; y < numberOfParts; y++) {
          var areaBounds = {
            north: southWest.lat() + (tileHeight * (y+1)),
            south: southWest.lat() + (tileHeight * y),
            east: southWest.lng() + (tileWidth * (x+1)),
            west: southWest.lng() + (tileWidth * x)
          };
          // console.log("areaBounds.north", areaBounds.north);
          // console.log("southWest.lng()", southWest.lng());
          // console.log("tileWidth", tileWidth);
          // console.log("tileHeight", tileHeight);
          var area = new google.maps.Rectangle({
            strokeColor: '#FF0000',
            //strokeOpacity: 0.8,
            strokeWeight: 2,
            //fillColor: '#FF0000',
            //fillOpacity: 0.35,
            map: map,
            bounds: areaBounds
          });
          var centerMark = new google.maps.Marker({
          position: area.getBounds().getCenter(),
          map: map,
          area: areaBounds,
          title: area.getBounds().getCenter().toUrlValue(6)
          });
          google.maps.event.addListener(centerMark, 'click', function(evt) {
            // console.log(this.position.lat());
            // console.log(this.position.lng());
            initMap(this.position.lat(), this.position.lng());
            // map.fitBounds(this.area);
            // google.maps.event.addListenerOnce(map, 'bounds_changed', function() {
            //   map.setZoom(map.getZoom()+1);
            // })
              
          });
        }
      }
    }   
  }
      var rectangle;
      var map;
      var infoWindow;
      // var centerLat = 7.734472;
      // var centerLng = 80.850632;
      function initMap(centerLat, centerLng) {
        map = new google.maps.Map(document.getElementById('map-canvas'), {
          center: {lat: centerLat, lng: centerLng},
          zoom: 10
        });
        var bounds = {
          north: centerLat - 0.1,
          south: centerLat  - 0.2,
          east: centerLng  - 0.1,
          west: centerLng  - 0.2
        };
        // Define the rectangle and set its editable property to true.
        rectangle = new google.maps.Rectangle({
          bounds: bounds,
          editable: true,
          draggable: true
        });
        rectangle.setMap(map);
        // Add an event listener on the rectangle.
        // rectangle.addListener('bounds_changed', showNewRect);
        rectangle.addListener('bounds_changed', showSelectedArea);
        // rectangle.addListener('bounds_changed', function(e) {
        //     showSelectedArea(e.latLng, map);
        // });
        // Define an info window on the map.
        infoWindow = new google.maps.InfoWindow();
      }
      // Show the new coordinates for the rectangle in an info window.
      /** @this {google.maps.Rectangle} */
      function showNewRect(event) {
        var ne = rectangle.getBounds().getNorthEast();
        var sw = rectangle.getBounds().getSouthWest();
        var contentString = '<b>Rectangle moved.</b><br>' +
            'New north-east corner: ' + ne.lat() + ', ' + ne.lng() + '<br>' +
            'New south-west corner: ' + sw.lat() + ', ' + sw.lng();
        // Set the info window's content and position.
        infoWindow.setContent(contentString);
        infoWindow.setPosition(ne);
        infoWindow.open(map);
      }   
        function showSelectedArea(event) {
            var nEast = rectangle.getBounds().getNorthEast();
            var sWest = rectangle.getBounds().getSouthWest();
            // console.log(nEast.lat());
            // console.log(sWest);
            // var areaBounds2 = {
            //         north: nEast.lat(),
            //         south: sWest.lat(),
            //         east: nEast.lng(),
            //         west: sWest.lng()
            //     };
            // var areaBounds3 = {
            //         north: 7.947435947273361,
            //         south: 7.84743594727336,
            //         east: 80.9978243828125,
            //         west: 80.85387907031259
            //     };
            var bounds = new google.maps.LatLngBounds(sWest,nEast);
            // bounds.extend(loc)
            map2 = new google.maps.Map(document.getElementById('map-canvas2'), {
                        // center: {lat: centerLat, lng: centerLng},
                        // zoom: 14
            });
            map2.fitBounds(bounds);
            // map2.setZoom(map2.getZoom()+1);
            // google.maps.event.addListenerOnce(map, 'bounds_changed', function() {
            //   map.setZoom(map.getZoom()+1);
            // })
      }
google.maps.event.addDomListener(window, "load", initialize); 
</script>


</html>